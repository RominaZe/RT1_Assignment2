<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Research Track 2: src/assignment_2_2023/src/node_c.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Research Track 2
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">First Assignment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_1d6b3af4d4108accc35ae8e110281b35.html">assignment_2_2023</a></li><li class="navelem"><a class="el" href="dir_e23bd931a0d1ca843aa747983493b25e.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">node_c.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Metrics Calculation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;assignment_2_2023/RobotPV.h&quot;</code><br />
<code>#include &quot;assignment_2_2023/Average.h&quot;</code><br />
<code>#include &quot;assignment_2_2023/Distance.h&quot;</code><br />
<code>#include &quot;nav_msgs/Odometry.h&quot;</code><br />
<code>#include &quot;numeric&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for node_c.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="node__c_8cpp__incl.png" border="0" usemap="#src_2assignment__2__2023_2src_2node__c_8cpp" alt=""/></div>
<map name="src_2assignment__2__2023_2src_2node__c_8cpp" id="src_2assignment__2__2023_2src_2node__c_8cpp">
<area shape="rect" title="Metrics Calculation." alt="" coords="501,5,676,47"/>
<area shape="rect" title=" " alt="" coords="5,95,84,121"/>
<area shape="rect" title=" " alt="" coords="109,95,330,121"/>
<area shape="rect" title=" " alt="" coords="354,95,575,121"/>
<area shape="rect" title=" " alt="" coords="600,95,825,121"/>
<area shape="rect" title=" " alt="" coords="849,95,1016,121"/>
<area shape="rect" title=" " alt="" coords="1041,95,1115,121"/>
</map>
</div>
</div>
<p><a href="node__c_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9d85cd7cec45f5509942d0607bdd6c36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="node__c_8cpp.html#a9d85cd7cec45f5509942d0607bdd6c36">AverageCallback</a> (const assignment_2_2023::RobotPV::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a9d85cd7cec45f5509942d0607bdd6c36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to compute average speed and distance to the goal position.  <a href="node__c_8cpp.html#a9d85cd7cec45f5509942d0607bdd6c36">More...</a><br /></td></tr>
<tr class="separator:a9d85cd7cec45f5509942d0607bdd6c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace051b2dcaa09bf61281f0b9d4d1250a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="node__c_8cpp.html#ace051b2dcaa09bf61281f0b9d4d1250a">DistSpeedCallback</a> (assignment_2_2023::Average::Request &amp;req, assignment_2_2023::Average::Response &amp;res)</td></tr>
<tr class="memdesc:ace051b2dcaa09bf61281f0b9d4d1250a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to handle distance and speed service requests.  <a href="node__c_8cpp.html#ace051b2dcaa09bf61281f0b9d4d1250a">More...</a><br /></td></tr>
<tr class="separator:ace051b2dcaa09bf61281f0b9d4d1250a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top"><a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a79b8e036dca6911e3295a47d99f21f43"><td class="memItemLeft" align="right" valign="top"><a id="a79b8e036dca6911e3295a47d99f21f43"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>distance</b> = 0</td></tr>
<tr class="separator:a79b8e036dca6911e3295a47d99f21f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f47959cee89b4ff26b31a588fc3d67"><td class="memItemLeft" align="right" valign="top"><a id="a83f47959cee89b4ff26b31a588fc3d67"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>avg_speed_x</b> = 0</td></tr>
<tr class="separator:a83f47959cee89b4ff26b31a588fc3d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed1997d0c4b096c3139b1f3216dc6a6"><td class="memItemLeft" align="right" valign="top"><a id="abed1997d0c4b096c3139b1f3216dc6a6"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>avg_speed_z</b></td></tr>
<tr class="separator:abed1997d0c4b096c3139b1f3216dc6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebad64dd24a470ea8d144fc6a4bdae30"><td class="memItemLeft" align="right" valign="top"><a id="aebad64dd24a470ea8d144fc6a4bdae30"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>window_x</b></td></tr>
<tr class="separator:aebad64dd24a470ea8d144fc6a4bdae30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb94259774c90b988daf03ab50004ff"><td class="memItemLeft" align="right" valign="top"><a id="a3cb94259774c90b988daf03ab50004ff"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>window_z</b></td></tr>
<tr class="separator:a3cb94259774c90b988daf03ab50004ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Metrics Calculation. </p>
<dl class="section author"><dt>Author</dt><dd>Romina Contreras </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>29/02/2024</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">/des_pos_x</td><td>Define the goal x position. </td></tr>
    <tr><td class="paramname">/des_pos_y</td><td>Define the goal y position. </td></tr>
    <tr><td class="paramname">/window_x</td><td>Define the windows of the enviroment used in the linear speed. </td></tr>
    <tr><td class="paramname">/window_y</td><td>Define the window of the enviroment used to make the average angular speed. </td></tr>
    <tr><td class="paramname">distance</td><td>Define the distance. </td></tr>
    <tr><td class="paramname">avg_speed_z</td><td>Define the average linear speed. </td></tr>
    <tr><td class="paramname">avg_speed_x</td><td>Define the average angular speed.</td></tr>
  </table>
  </dd>
</dl>
<p>Subscriber: <br  />
 °/reaching_goal/goal</p>
<p>Publisher: <br  />
 °None</p>
<p>Service: <br  />
 °/distance_velocity</p>
<p>Description:</p>
<p>This node operates as a service node that subscribes to the topic /position_velocity. Compute the distance between the robot between the robot and the target, and the average speed. </p>

<p class="definition">Definition in file <a class="el" href="node__c_8cpp_source.html">node_c.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9d85cd7cec45f5509942d0607bdd6c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d85cd7cec45f5509942d0607bdd6c36">&#9670;&nbsp;</a></span>AverageCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AverageCallback </td>
          <td>(</td>
          <td class="paramtype">const assignment_2_2023::RobotPV::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function to compute average speed and distance to the goal position. </p>
<p>This function is a callback for the /position_velocity topic messages. It computes the distance between the current robot position and the goal position specified by the parameters <code>/des_pos_x</code> and <code>/des_pos_y</code>. It also computes the average linear and angular speed of the robot over a specified window size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A constant pointer to the received message containing the robot's position and velocity.</td></tr>
  </table>
  </dd>
</dl>
<p>This function computes the distance between the current robot position and the goal position using the Euclidean distance formula. It retrieves the goal position coordinates from the ROS parameters <code>/des_pos_x</code> and <code>/des_pos_y</code>.</p>
<p>The average speed calculation requires a window size, which is obtained from the parameter <code>/window_size</code>. The function maintains sliding windows for linear and angular velocities and updates them with new values from the received message. Once the window size is reached, it calculates the average speed by summing up the velocities in the window and dividing by the window size.</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function modifies the values of global variables to store the computed distance and average speeds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="node__c_8cpp_source.html#l00061">61</a> of file <a class="el" href="node__c_8cpp_source.html">node_c.cpp</a>.</p>

</div>
</div>
<a id="ace051b2dcaa09bf61281f0b9d4d1250a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace051b2dcaa09bf61281f0b9d4d1250a">&#9670;&nbsp;</a></span>DistSpeedCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DistSpeedCallback </td>
          <td>(</td>
          <td class="paramtype">assignment_2_2023::Average::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">assignment_2_2023::Average::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function to handle distance and speed service requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>The service request containing the requested information (not used in this function). </td></tr>
    <tr><td class="paramname">res</td><td>The service response containing the computed average linear and angular speeds, along with the distance to the goal position.</td></tr>
  </table>
  </dd>
</dl>
<p>This function is a callback for the service requests to compute and return the average linear and angular speeds, along with the distance to the goal position.</p>
<p>This function populates the response message with the current values of the average linear and angular speeds and the distance to the goal position.</p>
<p>The service request is not used in this function as the response is computed based on the global variables.</p>
<dl class="section return"><dt>Returns</dt><dd>true</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function accesses and uses global variables to populate the response message. </dd></dl>

<p class="definition">Definition at line <a class="el" href="node__c_8cpp_source.html#l00107">107</a> of file <a class="el" href="node__c_8cpp_source.html">node_c.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
